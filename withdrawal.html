<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테마원 - 1등 수수료 페이백 플랫폼</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="main-container">
        <!-- Navigation Header -->
        <nav class="main-navigation">
            <div class="nav-content">
                <div class="nav-left">
                    <div class="logo-container">
                        <a href="#"><figure><img src="img/logo.png" alt=""></figure></a>
                    </div>
                </div>
                <div class="nav-center">
                    <ul class="nav-menu">
                        <li><a href="payback_main.html" class="nav-link">페이백 테스트</a></li>
                        <li><a href="#" class="nav-link">서비스 소개</a></li>
                        <li><a href="#" class="nav-link">봇 소개</a></li>
                        <li><a href="partnership.html" class="nav-link">제휴문의</a></li>
                    </ul>
                </div>
                <div class="nav-right">
                    <a href="mypage.html"><figure><img src="img/icon/account_circle.svg" alt=""></figure></a>
                    <a href="#" class="pc"><figure><img src="img/icon/language.svg" alt=""></figure></a>
                    <a href="#" class="mobile" id="mobileMenu"><figure><img src="img/icon/dehaze.svg" alt=""></figure></a>
                </div>
            </div>
            <!-- 모바일용 메뉴 -->
            <div class="mobile-menu" id="mobileMenuPanel">
                <div class="mobile-menu-header">
                    <div class="logo-container">
                        <a href="#"><figure><img src="img/logo.png" alt=""></figure></a>
                    </div>
                    <button class="mobile-menu-close" id="mobileMenuClose">
                        <figure><img src="img/icon/close.svg" alt=""></figure>
                    </button>
                </div>
                <ul class="mobile-menu-list">
                    <li><a href="payback_main.html" class="mobile-nav-link">페이백 테스트</a></li>
                    <li><a href="#" class="mobile-nav-link">서비스 소개</a></li>
                    <li><a href="#" class="mobile-nav-link">봇 소개</a></li>
                    <li><a href="partnership.html" class="mobile-nav-link">제휴문의</a></li>
                </ul>
                <div class="mobile-buttons">
                    <a href="#"><figure><img src="img/icon/language.svg" alt=""></figure><span>언어 변경</span></a>
                </div>
            </div>
        </nav>

        <main class="sub-content withdrawal-content">
            <div class="withdrawal-wrapper">
                <div class="section-title">
                    <h2>얼마를 출금하시겠어요?</h2>
                    <p>페이백이 <span class="highlight-blue bold-txt">50</span><span class="highlight-blue bold-txt">USDT</span> 이상인 UID는 출금이 가능해요</p>
                </div>
                <div class="account-info">
                    <figure><img src="img/logos/bitget.png" alt=""></figure>
                    <div class="account-txt-box">
                        <span class="account-uid">UID 00000000</span>
                        <span class="account-value" id="accountValue">80.00</span>
                    </div>
                </div>
                <form action="" class="form withdrawal-form">
                    <div class="input-group">
                        <input type="text" name="" id="withdrawalValue" class="input-field-line withdrawal" placeholder="금액을 입력해주세요." autocomplete="off">
                        <button type="button" class="max-btn" id="maxBtn">최대</button>
                    </div>
                </form>
                <div class="btn-group">
                    <button type="submit" class="blue-btn withdrawal-btn" disabled>출금하기</button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="footer-links">
                        <a href="#">이용약관</a>
                        <a href="#">위치기반서비스 이용약관</a>
                        <a href="#">개인정보처리방침</a>
                    </div>
                    <div class="company-info">
                        <div class="company-logo">
                            <a href="#"><figure><img src="img/logo.png" alt=""></figure></a>
                        </div>
                        <div class="info-box">
                            <p class="contact-info">제휴제안&광고문의: 테마원@테마원.com <br class="mobile">고객센터: cs@테마원.com</p>
                            <p class="company-details">상호명 : (주)테마원 ㅣ 대표 홍길동 ㅣ 사업자등록번호 000-00-00000</p>
                            <p class="address-info">주소 : 서울시 서울구 서울로 101, 1층 ㅣ 전화 : 1000-0000 & 000-0000-0000</p>
                            <p class="copyright">Copyright (주)테더마이너스원. ALL RIGHTS RESERVED.</p>
                        </div>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="social-icons">
                        <a href="#"><figure><img src="img/icon/insta.svg" alt=""></figure></a>
                        <a href="#"><figure><img src="img/icon/in.svg" alt=""></figure></a>
                        <a href="#"><figure><img src="img/icon/x.svg" alt=""></figure></a>
                        <a href="#"><figure><img src="img/icon/youtube.svg" alt=""></figure></a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- 거래소 선택 모달 -->
    <div class="bg"></div>
    <div class="modal exchange-modal" id="exchangeModal">
        <div class="inner">
            <div class="modal-header">
                <h5>거래소 선택</h5>
                <a href="#" class="close"><figure><img src="img/icon/close.svg" alt=""></figure></a>
            </div>
            <div class="modal-body">
                <ul class="exchange-list">
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/binance.png" alt=""></figure>
                            <span>Binance</span>
                            <figure class="heat"><img src="img/icon/mode_heat.svg" alt=""></figure>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/bybit.png" alt=""></figure>
                            <span>Bybit</span>
                            <figure class="heat"><img src="img/icon/mode_heat.svg" alt=""></figure>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/bitget.png" alt=""></figure>
                            <span>Bitget</span>
                            <figure class="heat"><img src="img/icon/mode_heat.svg" alt=""></figure>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/okx.png" alt=""></figure>
                            <span>OKX</span>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/bingx.png" alt=""></figure>
                            <span>BingX</span>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/gateio.png" alt=""></figure>
                            <span>Gate.io</span>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/tapbit.png" alt=""></figure>
                            <span>Tapbit</span>
                        </button>
                    </li>
                    <li>
                        <button type="button" class="exchange-btn">
                            <figure><img src="img/logos/mexc.png" alt=""></figure>
                            <span>MEXC</span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script src="js/modal.js"></script>
    <script src="js/mobile_menu.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const withdrawalValue = document.getElementById('withdrawalValue');
            const withdrawalBtn = document.querySelector('.withdrawal-btn');
            const maxBtn = document.querySelector('.max-btn');
            const accountValue = document.querySelector('.account-value');

            // 최대 출금 가능 금액
            const maxAmount = parseFloat(accountValue.textContent.trim());

            // 숫자만 추출하는 함수
            function extractNumber(value) {
                return value.replace(/[^\d.]/g, '');
            }

            // 값에 USDT 단위 추가하는 함수
            function formatWithUSDT(value) {
                if (value === '') return '';
                return value + ' USDT';
            }

            // 입력값 변경 시 버튼 활성화/비활성화 및 최대값 제한
            withdrawalValue.addEventListener('input', function() {
                // 현재 커서 위치 저장
                const cursorPosition = this.selectionStart;
                
                // 숫자만 추출
                let numericValue = extractNumber(this.value);
                let inputValue = parseFloat(numericValue);
                
                // 최대 금액 초과 시 최대값으로 제한
                if (inputValue > maxAmount) {
                    numericValue = maxAmount.toString();
                    inputValue = maxAmount;
                }
                
                // USDT 단위와 함께 표시
                const formattedValue = formatWithUSDT(numericValue);
                this.value = formattedValue;
                
                // 커서 위치 조정 (USDT 앞에 위치하도록)
                const newCursorPosition = Math.min(cursorPosition, numericValue.length);
                this.setSelectionRange(newCursorPosition, newCursorPosition);
                
                // 버튼 활성화/비활성화
                if (numericValue && inputValue > 0) {
                    withdrawalBtn.disabled = false;
                } else {
                    withdrawalBtn.disabled = true;
                }
            });

            // 포커스 시 커서를 숫자 부분 끝에 위치
            withdrawalValue.addEventListener('focus', function() {
                const numericPart = extractNumber(this.value);
                this.setSelectionRange(numericPart.length, numericPart.length);
            });

            // 키 입력 시 USDT 부분에서 입력 방지
            withdrawalValue.addEventListener('keydown', function(e) {
                const cursorPosition = this.selectionStart;
                const numericPart = extractNumber(this.value);
                
                // USDT 부분에서 입력 방지 (백스페이스, 델리트는 허용)
                if (cursorPosition > numericPart.length && e.key !== 'Backspace' && e.key !== 'Delete' && e.key !== 'ArrowLeft' && e.key !== 'ArrowRight') {
                    e.preventDefault();
                }
            });

            // 최대 버튼 클릭 시 계좌 잔액을 입력창에 설정
            maxBtn.addEventListener('click', function() {
                withdrawalValue.value = formatWithUSDT(maxAmount.toString());
                
                // 값이 입력되었으므로 버튼 활성화
                if (maxAmount > 0) {
                    withdrawalBtn.disabled = false;
                }
                
                // 커서를 숫자 부분 끝에 위치
                withdrawalValue.setSelectionRange(maxAmount.toString().length, maxAmount.toString().length);
            });
        });
    </script>
</body>
</html>
